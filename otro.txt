postgresql://reviews_db_xwba_user:Lct6E6fun09mhucNGX8y4uA5rVWlNPGW@dpg-d4genhbe5dus73biq3q0-a.oregon-postgres.render.com/reviews_db_xwba

render psql dpg-d4genhbe5dus73biq3q0-a

1.9. Dockerfile para Render
FROM python:3.11-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY app ./app

ENV PORT=8000
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]
En Render:
Servicio Web ‚Üí repo backend.
Variables de entorno:
DATABASE_URL (de Postgres de Render).
SECRET_KEY (un string largo).
GOOGLE_API_KEY (tu key de Gemini).
Opcional: ACCESS_TOKEN_EXPIRE_MINUTES.
2. Frontend ‚Äì SPA en GitHub Pages
Un solo index.html con JS que:
Hace fetch a /register y /token.
Guarda token en localStorage.
Envia rese√±as con Authorization: Bearer <token>.
Consume GET /reviews/{producto}.
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Plataforma de Rese√±as Inteligente</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{font-family:system-ui,Arial,sans-serif;max-width:900px;margin:24px auto;padding:0 16px}
    section{border:1px solid #ddd;border-radius:12px;padding:16px;margin-bottom:16px}
    input,button,textarea{padding:8px;margin:6px 0;width:100%}
    .row{display:flex;gap:12px}
    .row>div{flex:1}
    code{background:#f6f6f6;padding:2px 6px;border-radius:6px}
  </style>
</head>
<body>
  <h1>Plataforma de Rese√±as ü§ñ</h1>

  <section>
    <h2>Config</h2>
    <div>API: <code id="api"></code></div>
  </section>

  <section>
    <h2>Registro</h2>
    <input id="regEmail" placeholder="Email">
    <input id="regPwd" type="password" placeholder="Password (min 6)">
    <button onclick="register()">Registrarse</button>
    <div id="regMsg"></div>
  </section>

  <section>
    <h2>Login</h2>
    <input id="logEmail" placeholder="Email">
    <input id="logPwd" type="password" placeholder="Password">
    <button onclick="login()">Iniciar sesi√≥n</button>
    <div><strong>Token:</strong> <code id="token"></code></div>
  </section>

  <section id="protected" style="display:none">
    <h2>Nueva Rese√±a (protegido)</h2>
    <input id="prod" placeholder="Producto (ej. iPhone 15)">
    <textarea id="text" rows="4" placeholder="Escribe tu rese√±a..."></textarea>
    <button onclick="createReview()">Enviar rese√±a</button>
    <div id="revMsg"></div>
  </section>

  <section>
    <h2>Ver Rese√±as P√∫blicas por Producto</h2>
    <div class="row">
      <div>
        <input id="searchProd" placeholder="Producto (ej. iPhone 15)">
      </div>
      <div>
        <button onclick="loadReviews()">Buscar</button>
      </div>
    </div>
    <div id="list"></div>
  </section>

<script>
const API_BASE = "https://TU-SERVICIO.onrender.com"; // <-- pon aqu√≠ la URL de Render
document.getElementById('api').textContent = API_BASE;

function saveToken(t){
  localStorage.setItem('token', t);
  document.getElementById('token').textContent = t;
  document.getElementById('protected').style.display = t ? 'block' : 'none';
}
function getToken(){ return localStorage.getItem('token') || ""; }
saveToken(getToken());

async function register(){
  const email = document.getElementById('regEmail').value.trim();
  const password = document.getElementById('regPwd').value.trim();
  const r = await fetch(`${API_BASE}/register`, {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({email, password})
  });
  document.getElementById('regMsg').textContent = await r.text();
}

async function login(){
  const username = document.getElementById('logEmail').value.trim();
  const password = document.getElementById('logPwd').value.trim();
  const body = new URLSearchParams({username, password});
  const r = await fetch(`${API_BASE}/token`, {
    method:'POST',
    headers:{'Content-Type':'application/x-www-form-urlencoded'},
    body
  });
  const data = await r.json();
  if (data.access_token){
    saveToken(data.access_token);
  } else {
    alert(JSON.stringify(data));
  }
}

async function createReview(){
  const token = getToken();
  if (!token) return alert("Debes iniciar sesi√≥n.");
  const producto = document.getElementById('prod').value.trim();
  const texto_rese√±a = document.getElementById('text').value.trim();
  const r = await fetch(`${API_BASE}/reviews`, {
    method:'POST',
    headers:{
      'Content-Type':'application/json',
      'Authorization': `Bearer ${token}`
    },
    body: JSON.stringify({ producto, texto_rese√±a })
  });
  document.getElementById('revMsg').textContent = await r.text();
}

async function loadReviews(){
  const p = document.getElementById('searchProd').value.trim();
  const r = await fetch(`${API_BASE}/reviews/${encodeURIComponent(p)}`);
  const data = await r.json();
  const el = document.getElementById('list');
  el.innerHTML = "";
  data.forEach(d=>{
    const div = document.createElement('div');
    div.style.border = "1px solid #eee";
    div.style.padding = "8px";
    div.style.borderRadius = "8px";
    div.style.marginBottom = "8px";
    div.innerHTML = `
      <strong>${d.product}</strong> ¬∑ <em>${d.sentiment}</em><br>
      ${d.text}<br>
      <small>por ${d.author_email} ‚Äî ${new Date(d.created_at).toLocaleString()}</small>
    `;
    el.appendChild(div);
  });
}
</script>
</body>
</html>
Subes esto a un repo, activas GitHub Pages y ya tienes el frontend.
3. Documento final a entregar
Archivo de texto simple (puede ser .txt o .md) con algo as√≠:
URL Frontend (GitHub Pages):
https://tu-usuario.github.io/tu-repo/
URL Backend (Render):
https://tu-servicio.onrender.com
Usuario de prueba:
Email: demo@demo.com
Password: Demo123! (o el que t√∫ definas y crees con /register)
Con esto cubres todos los requisitos de la opci√≥n 1:
‚úÖ Auth JWT
‚úÖ IA con Gemini (sentimiento)
‚úÖ API protegida /reviews
‚úÖ API p√∫blica /reviews/{producto}
‚úÖ CORS para GitHub Pages
‚úÖ SPA con registro, login, rese√±as y feed p√∫blico.



1.9. Dockerfile para Render
FROM python:3.11-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY app ./app

ENV PORT=8000
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]
En Render:
Servicio Web ‚Üí repo backend.
Variables de entorno:
DATABASE_URL (de Postgres de Render).
SECRET_KEY (un string largo).
GOOGLE_API_KEY (tu key de Gemini).
Opcional: ACCESS_TOKEN_EXPIRE_MINUTES.

2. Frontend ‚Äì SPA en GitHub Pages
Un solo index.html con JS que:
Hace fetch a /register y /token.
Guarda token en localStorage.
Envia rese√±as con Authorization: Bearer <token>.
Consume GET /reviews/{producto}.
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Plataforma de Rese√±as Inteligente</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{font-family:system-ui,Arial,sans-serif;max-width:900px;margin:24px auto;padding:0 16px}
    section{border:1px solid #ddd;border-radius:12px;padding:16px;margin-bottom:16px}
    input,button,textarea{padding:8px;margin:6px 0;width:100%}
    .row{display:flex;gap:12px}
    .row>div{flex:1}
    code{background:#f6f6f6;padding:2px 6px;border-radius:6px}
  </style>
</head>
<body>
  <h1>Plataforma de Rese√±as ü§ñ</h1>

  <section>
    <h2>Config</h2>
    <div>API: <code id="api"></code></div>
  </section>

  <section>
    <h2>Registro</h2>
    <input id="regEmail" placeholder="Email">
    <input id="regPwd" type="password" placeholder="Password (min 6)">
    <button onclick="register()">Registrarse</button>
    <div id="regMsg"></div>
  </section>

  <section>
    <h2>Login</h2>
    <input id="logEmail" placeholder="Email">
    <input id="logPwd" type="password" placeholder="Password">
    <button onclick="login()">Iniciar sesi√≥n</button>
    <div><strong>Token:</strong> <code id="token"></code></div>
  </section>

  <section id="protected" style="display:none">
    <h2>Nueva Rese√±a (protegido)</h2>
    <input id="prod" placeholder="Producto (ej. iPhone 15)">
    <textarea id="text" rows="4" placeholder="Escribe tu rese√±a..."></textarea>
    <button onclick="createReview()">Enviar rese√±a</button>
    <div id="revMsg"></div>
  </section>

  <section>
    <h2>Ver Rese√±as P√∫blicas por Producto</h2>
    <div class="row">
      <div>
        <input id="searchProd" placeholder="Producto (ej. iPhone 15)">
      </div>
      <div>
        <button onclick="loadReviews()">Buscar</button>
      </div>
    </div>
    <div id="list"></div>
  </section>

<script>
const API_BASE = "https://TU-SERVICIO.onrender.com"; // <-- pon aqu√≠ la URL de Render
document.getElementById('api').textContent = API_BASE;

function saveToken(t){
  localStorage.setItem('token', t);
  document.getElementById('token').textContent = t;
  document.getElementById('protected').style.display = t ? 'block' : 'none';
}
function getToken(){ return localStorage.getItem('token') || ""; }
saveToken(getToken());

async function register(){
  const email = document.getElementById('regEmail').value.trim();
  const password = document.getElementById('regPwd').value.trim();
  const r = await fetch(`${API_BASE}/register`, {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({email, password})
  });
  document.getElementById('regMsg').textContent = await r.text();
}

async function login(){
  const username = document.getElementById('logEmail').value.trim();
  const password = document.getElementById('logPwd').value.trim();
  const body = new URLSearchParams({username, password});
  const r = await fetch(`${API_BASE}/token`, {
    method:'POST',
    headers:{'Content-Type':'application/x-www-form-urlencoded'},
    body
  });
  const data = await r.json();
  if (data.access_token){
    saveToken(data.access_token);
  } else {
    alert(JSON.stringify(data));
  }
}

async function createReview(){
  const token = getToken();
  if (!token) return alert("Debes iniciar sesi√≥n.");
  const producto = document.getElementById('prod').value.trim();
  const texto_rese√±a = document.getElementById('text').value.trim();
  const r = await fetch(`${API_BASE}/reviews`, {
    method:'POST',
    headers:{
      'Content-Type':'application/json',
      'Authorization': `Bearer ${token}`
    },
    body: JSON.stringify({ producto, texto_rese√±a })
  });
  document.getElementById('revMsg').textContent = await r.text();
}

async function loadReviews(){
  const p = document.getElementById('searchProd').value.trim();
  const r = await fetch(`${API_BASE}/reviews/${encodeURIComponent(p)}`);
  const data = await r.json();
  const el = document.getElementById('list');
  el.innerHTML = "";
  data.forEach(d=>{
    const div = document.createElement('div');
    div.style.border = "1px solid #eee";
    div.style.padding = "8px";
    div.style.borderRadius = "8px";
    div.style.marginBottom = "8px";
    div.innerHTML = `
      <strong>${d.product}</strong> ¬∑ <em>${d.sentiment}</em><br>
      ${d.text}<br>
      <small>por ${d.author_email} ‚Äî ${new Date(d.created_at).toLocaleString()}</small>
    `;
    el.appendChild(div);
  });
}
</script>
</body>
</html>
Subes esto a un repo, activas GitHub Pages y ya tienes el frontend.
3. Documento final a entregar
Archivo de texto simple (puede ser .txt o .md) con algo as√≠:
URL Frontend (GitHub Pages):
https://tu-usuario.github.io/tu-repo/
URL Backend (Render):
https://tu-servicio.onrender.com
Usuario de prueba:
Email: demo@demo.com
Password: Demo123! (o el que t√∫ definas y crees con /register)
Con esto cubres todos los requisitos de la opci√≥n 1:
‚úÖ Auth JWT
‚úÖ IA con Gemini (sentimiento)
‚úÖ API protegida /reviews
‚úÖ API p√∫blica /reviews/{producto}
‚úÖ CORS para GitHub Pages
‚úÖ SPA con registro, login, rese√±as y feed p√∫blico.